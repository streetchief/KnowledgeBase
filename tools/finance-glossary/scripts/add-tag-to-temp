#!/bin/bash
set -euo pipefail
IFS=$'\n\t'

glossaryDir="/knowledge/finance-glossary"
relativeGlossaryDir="$(pwd)$glossaryDir"
sourceDir="$relativeGlossaryDir/temp"

read -p "Tag to add: " tag

if [[ -z "$tag" ]]; then
    echo "No tag provided!"
    exit 1
fi

for file in $sourceDir/*; do
    echo "$tag" >> "$file"
    echo "Moving $file..."
    mv "$file" "$relativeGlossaryDir"
done

echo "Removing temp dir $sourceDir..."
rmdir "$sourceDir"
echo "Done!"
